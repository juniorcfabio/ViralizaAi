{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "installCommand": "npm install --legacy-peer-deps",
  "framework": "vite",
  "functions": {
    "api/**/*.js": {
      "maxDuration": 30
    }
  },
  "rewrites": [
    { "source": "/api/activate-plan", "destination": "/api/catchall?route=activate-plan" },
    { "source": "/api/auth/:action", "destination": "/api/auth-handler?action=:action" },
    { "source": "/api/admin/users", "destination": "/api/catchall?route=admin/users" },
    { "source": "/api/admin/:action", "destination": "/api/admin-handler?action=:action" },
    { "source": "/api/health/:path*", "destination": "/api/catchall?route=health/:path*" },
    { "source": "/api/affiliate/:path*", "destination": "/api/catchall?route=affiliate/:path*" },
    { "source": "/api/pricing/:path*", "destination": "/api/catchall?route=pricing/:path*" },
    { "source": "/api/v1/:path*", "destination": "/api/catchall?route=v1/:path*" },
    { "source": "/api/ai/support", "destination": "/api/catchall?route=ai/support" },
    { "source": "/api/franchise/:path*", "destination": "/api/catchall?route=franchise/:path*" },
    { "source": "/api/marketplace/:path*", "destination": "/api/catchall?route=marketplace/:path*" },
    { "source": "/api/whitelabel/:path*", "destination": "/api/catchall?route=whitelabel/:path*" },
    { "source": "/api/database/:path*", "destination": "/api/catchall?route=database/:path*" },
    { "source": "/api/whatsapp-webhook", "destination": "/api/whatsapp-webhook" },
    { "source": "/api/whatsapp-send", "destination": "/api/whatsapp-send" },
    { "source": "/api/webhook/:path*", "destination": "/api/catchall?route=webhook/:path*" },
    { "source": "/api/webhooks/:path*", "destination": "/api/catchall?route=webhooks/:path*" },
    { "source": "/api/create-pix-checkout", "destination": "/api/catchall?route=create-pix-checkout" },
    { "source": "/api/create-subscription", "destination": "/api/catchall?route=create-subscription" },
    { "source": "/api/create-tool-payment", "destination": "/api/catchall?route=create-tool-payment" },
    { "source": "/api/create-ad-payment", "destination": "/api/catchall?route=create-ad-payment" },
    { "source": "/api/global-payment", "destination": "/api/catchall?route=global-payment" },
    { "source": "/api/verify-pix-payment", "destination": "/api/catchall?route=verify-pix-payment" },
    { "source": "/api/stripe-checkout", "destination": "/api/catchall?route=stripe-checkout" },
    { "source": "/api/stripe-payment-unified", "destination": "/api/catchall?route=stripe-payment-unified" },
    { "source": "/api/stripe-secure-payment", "destination": "/api/catchall?route=stripe-secure-payment" },
    { "source": "/api/stripe-webhook", "destination": "/api/catchall?route=stripe-webhook" },
    { "source": "/api/webhook-stripe", "destination": "/api/catchall?route=webhook-stripe" },
    { "source": "/api/webhook-pix", "destination": "/api/catchall?route=webhook-pix" },
    { "source": "/api/cron-jobs", "destination": "/api/catchall?route=cron-jobs" },
    { "source": "/api/cron-jobs-affiliate", "destination": "/api/catchall?route=cron-jobs-affiliate" },
    { "source": "/api/generate-content", "destination": "/api/catchall?route=generate-content" },
    { "source": "/api/generate-ebook", "destination": "/api/catchall?route=generate-ebook" },
    { "source": "/api/generate-video", "destination": "/api/catchall?route=generate-video" },
    {
      "source": "/((?!api/).*)",
      "destination": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "Access-Control-Allow-Origin",
          "value": "*"
        },
        {
          "key": "Access-Control-Allow-Methods",
          "value": "GET, POST, PUT, DELETE, OPTIONS"
        },
        {
          "key": "Access-Control-Allow-Headers",
          "value": "Content-Type, Authorization"
        }
      ]
    }
  ],
  "env": {
    "NODE_ENV": "production",
    "VITE_API_BASE_URL": "https://viralizaai.vercel.app/api"
  }
}
